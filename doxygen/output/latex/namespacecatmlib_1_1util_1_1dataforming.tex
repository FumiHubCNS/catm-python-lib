\doxysection{catmlib.\+util.\+dataforming Namespace Reference}
\hypertarget{namespacecatmlib_1_1util_1_1dataforming}{}\label{namespacecatmlib_1_1util_1_1dataforming}\index{catmlib.util.dataforming@{catmlib.util.dataforming}}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacecatmlib_1_1util_1_1dataforming_ab50e251c56edc37809af541134cce5be}{str\+\_\+to\+\_\+array}} (input\+\_\+str)
\item 
\mbox{\hyperlink{namespacecatmlib_1_1util_1_1dataforming_aa94aabee6696bdaf7fd84acfc1addc99}{load\+\_\+numbers}} (file\+\_\+path)
\item 
\mbox{\hyperlink{namespacecatmlib_1_1util_1_1dataforming_a13dbd95a6cac156a4ec8ada005783d80}{read\+\_\+spe\+\_\+file}} (file\+\_\+path)
\item 
\mbox{\hyperlink{namespacecatmlib_1_1util_1_1dataforming_a610a67ced407ba1e31850572ee25f57e}{create\+\_\+histogram\+\_\+data\+\_\+from\+\_\+points}} (x, y)
\item 
\mbox{\hyperlink{namespacecatmlib_1_1util_1_1dataforming_a65c2738b149373bcba2e1600c3f93cb6}{find\+\_\+peaks}} (data)
\item 
\mbox{\hyperlink{namespacecatmlib_1_1util_1_1dataforming_ab28a38019689dd57733f2edd84b5f70b}{parse\+\_\+args}} (argv)
\end{DoxyCompactItemize}


\label{doc-func-members}
\Hypertarget{namespacecatmlib_1_1util_1_1dataforming_doc-func-members}
\doxysubsection{Function Documentation}
\Hypertarget{namespacecatmlib_1_1util_1_1dataforming_a610a67ced407ba1e31850572ee25f57e}\index{catmlib.util.dataforming@{catmlib.util.dataforming}!create\_histogram\_data\_from\_points@{create\_histogram\_data\_from\_points}}
\index{create\_histogram\_data\_from\_points@{create\_histogram\_data\_from\_points}!catmlib.util.dataforming@{catmlib.util.dataforming}}
\doxysubsubsection{\texorpdfstring{create\_histogram\_data\_from\_points()}{create\_histogram\_data\_from\_points()}}
{\footnotesize\ttfamily \label{namespacecatmlib_1_1util_1_1dataforming_a610a67ced407ba1e31850572ee25f57e} 
catmlib.\+util.\+dataforming.\+create\+\_\+histogram\+\_\+data\+\_\+from\+\_\+points (\begin{DoxyParamCaption}\item[{}]{x}{, }\item[{}]{y}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{dataforming_8py_source_l00058}{58}} of file \mbox{\hyperlink{dataforming_8py_source}{dataforming.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00058\ \textcolor{keyword}{def\ }create\_histogram\_data\_from\_points(x,\ y):}
\DoxyCodeLine{00059\ \ \ \ \ }
\DoxyCodeLine{00064\ \ \ \ \ frequency\_distribution\ =\ []}
\DoxyCodeLine{00065\ \ \ \ \ }
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{keywordflow}{for}\ x\_val,\ freq\ \textcolor{keywordflow}{in}\ zip(x,\ y):}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ frequency\_distribution.extend([x\_val]\ *\ freq)}
\DoxyCodeLine{00068\ \ \ \ \ }
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{keywordflow}{return}\ frequency\_distribution}
\DoxyCodeLine{00070\ }

\end{DoxyCode}
\Hypertarget{namespacecatmlib_1_1util_1_1dataforming_a65c2738b149373bcba2e1600c3f93cb6}\index{catmlib.util.dataforming@{catmlib.util.dataforming}!find\_peaks@{find\_peaks}}
\index{find\_peaks@{find\_peaks}!catmlib.util.dataforming@{catmlib.util.dataforming}}
\doxysubsubsection{\texorpdfstring{find\_peaks()}{find\_peaks()}}
{\footnotesize\ttfamily \label{namespacecatmlib_1_1util_1_1dataforming_a65c2738b149373bcba2e1600c3f93cb6} 
catmlib.\+util.\+dataforming.\+find\+\_\+peaks (\begin{DoxyParamCaption}\item[{}]{data}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{dataforming_8py_source_l00071}{71}} of file \mbox{\hyperlink{dataforming_8py_source}{dataforming.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00071\ \textcolor{keyword}{def\ }find\_peaks(data):}
\DoxyCodeLine{00072\ \ \ \ \ }
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{keywordflow}{if}\ len(data)\ <\ 3:}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0,\ []}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \ \ \ \ peaks\ =\ 0}
\DoxyCodeLine{00080\ \ \ \ \ peak\_indices\ =\ []}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00082\ \ \ \ \ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(1,\ len(data)\ -\/\ 1):}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ ピーク判定:\ 両隣よりも大きい}}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ data[i]\ >\ data[i\ -\/\ 1]\ \textcolor{keywordflow}{and}\ data[i]\ >\ data[i\ +\ 1]:}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \ \ \ \ peaks\ +=\ 1}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ peak\_indices.append(i)}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{keywordflow}{return}\ peaks,\ peak\_indices}
\DoxyCodeLine{00089\ }

\end{DoxyCode}
\Hypertarget{namespacecatmlib_1_1util_1_1dataforming_aa94aabee6696bdaf7fd84acfc1addc99}\index{catmlib.util.dataforming@{catmlib.util.dataforming}!load\_numbers@{load\_numbers}}
\index{load\_numbers@{load\_numbers}!catmlib.util.dataforming@{catmlib.util.dataforming}}
\doxysubsubsection{\texorpdfstring{load\_numbers()}{load\_numbers()}}
{\footnotesize\ttfamily \label{namespacecatmlib_1_1util_1_1dataforming_aa94aabee6696bdaf7fd84acfc1addc99} 
catmlib.\+util.\+dataforming.\+load\+\_\+numbers (\begin{DoxyParamCaption}\item[{}]{file\+\_\+path}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{dataforming_8py_source_l00021}{21}} of file \mbox{\hyperlink{dataforming_8py_source}{dataforming.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00021\ \textcolor{keyword}{def\ }load\_numbers(file\_path):}
\DoxyCodeLine{00022\ \ \ \ \ }
\DoxyCodeLine{00026\ \ \ \ \ \textcolor{keyword}{with}\ open(file\_path,\ \textcolor{stringliteral}{'r'})\ \textcolor{keyword}{as}\ f:}
\DoxyCodeLine{00027\ \ \ \ \ \ \ \ \ numbers\ =\ [int(line.strip())\ \textcolor{keywordflow}{for}\ line\ \textcolor{keywordflow}{in}\ f\ \textcolor{keywordflow}{if}\ line.strip().isdigit()]\ }
\DoxyCodeLine{00028\ \ \ \ \ \textcolor{keywordflow}{return}\ numbers}
\DoxyCodeLine{00029\ }

\end{DoxyCode}
\Hypertarget{namespacecatmlib_1_1util_1_1dataforming_ab28a38019689dd57733f2edd84b5f70b}\index{catmlib.util.dataforming@{catmlib.util.dataforming}!parse\_args@{parse\_args}}
\index{parse\_args@{parse\_args}!catmlib.util.dataforming@{catmlib.util.dataforming}}
\doxysubsubsection{\texorpdfstring{parse\_args()}{parse\_args()}}
{\footnotesize\ttfamily \label{namespacecatmlib_1_1util_1_1dataforming_ab28a38019689dd57733f2edd84b5f70b} 
catmlib.\+util.\+dataforming.\+parse\+\_\+args (\begin{DoxyParamCaption}\item[{}]{argv}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{dataforming_8py_source_l00090}{90}} of file \mbox{\hyperlink{dataforming_8py_source}{dataforming.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00090\ \textcolor{keyword}{def\ }parse\_args(argv):}
\DoxyCodeLine{00091\ \ \ \ \ }
\DoxyCodeLine{00093\ \ \ \ \ args\_dict\ =\ \{\}}
\DoxyCodeLine{00094\ \ \ \ \ \textcolor{keywordflow}{for}\ arg\ \textcolor{keywordflow}{in}\ argv[1:]:}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{stringliteral}{'='}\ \textcolor{keywordflow}{in}\ arg:}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \ \ \ \ key,\ value\ =\ arg.split(\textcolor{stringliteral}{'='})}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \ \ \ \ args\_dict[key]\ =\ value}
\DoxyCodeLine{00098\ \ \ \ \ \textcolor{keywordflow}{return}\ args\_dict}

\end{DoxyCode}
\Hypertarget{namespacecatmlib_1_1util_1_1dataforming_a13dbd95a6cac156a4ec8ada005783d80}\index{catmlib.util.dataforming@{catmlib.util.dataforming}!read\_spe\_file@{read\_spe\_file}}
\index{read\_spe\_file@{read\_spe\_file}!catmlib.util.dataforming@{catmlib.util.dataforming}}
\doxysubsubsection{\texorpdfstring{read\_spe\_file()}{read\_spe\_file()}}
{\footnotesize\ttfamily \label{namespacecatmlib_1_1util_1_1dataforming_a13dbd95a6cac156a4ec8ada005783d80} 
catmlib.\+util.\+dataforming.\+read\+\_\+spe\+\_\+file (\begin{DoxyParamCaption}\item[{}]{file\+\_\+path}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{dataforming_8py_source_l00030}{30}} of file \mbox{\hyperlink{dataforming_8py_source}{dataforming.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00030\ \textcolor{keyword}{def\ }read\_spe\_file(file\_path):}
\DoxyCodeLine{00031\ \ \ \ \ }
\DoxyCodeLine{00035\ \ \ \ \ x\ =\ []}
\DoxyCodeLine{00036\ \ \ \ \ y\ =\ []}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \ \ \ \ \textcolor{keyword}{with}\ open(file\_path,\ \textcolor{stringliteral}{'r'})\ \textcolor{keyword}{as}\ file:}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ lines\ =\ file.readlines()}
\DoxyCodeLine{00040\ \ \ \ \ }
\DoxyCodeLine{00041\ \ \ \ \ data\_section\ =\ \textcolor{keyword}{False}}
\DoxyCodeLine{00042\ \ \ \ \ \textcolor{keywordflow}{for}\ i,\ line\ \textcolor{keywordflow}{in}\ enumerate(lines):}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ line.strip()\ ==\ \textcolor{stringliteral}{"{}\$DATA:"{}}:}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \ \ \ \ data\_section\ =\ \textcolor{keyword}{True}}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \ \ \ \ channel\_count\ =\ int(lines[i\ +\ 1].split()[1])}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \ \ \ \ start\_idx\ =\ i\ +\ 2\ \ }
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break}}
\DoxyCodeLine{00048\ \ \ \ \ }
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{keywordflow}{if}\ data\_section:}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(start\_idx,\ start\_idx\ +\ channel\_count):}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ lines[i].strip()\ ==\ \textcolor{stringliteral}{"{}\$ENER\_FIT:"{}}:}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break}}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \ \ \ \ y.append(int(lines[i].strip()))}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \ \ \ \ x.append(len(x))}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{keywordflow}{return}\ x,\ y}
\DoxyCodeLine{00057\ }

\end{DoxyCode}
\Hypertarget{namespacecatmlib_1_1util_1_1dataforming_ab50e251c56edc37809af541134cce5be}\index{catmlib.util.dataforming@{catmlib.util.dataforming}!str\_to\_array@{str\_to\_array}}
\index{str\_to\_array@{str\_to\_array}!catmlib.util.dataforming@{catmlib.util.dataforming}}
\doxysubsubsection{\texorpdfstring{str\_to\_array()}{str\_to\_array()}}
{\footnotesize\ttfamily \label{namespacecatmlib_1_1util_1_1dataforming_ab50e251c56edc37809af541134cce5be} 
catmlib.\+util.\+dataforming.\+str\+\_\+to\+\_\+array (\begin{DoxyParamCaption}\item[{}]{input\+\_\+str}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{dataforming_8py_source_l00009}{9}} of file \mbox{\hyperlink{dataforming_8py_source}{dataforming.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00009\ \textcolor{keyword}{def\ }str\_to\_array(input\_str):}
\DoxyCodeLine{00010\ \ \ \ \ }
\DoxyCodeLine{00014\ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{00015\ \ \ \ \ \ \ \ \ str\_list\ =\ str(input\_str).split()\ }
\DoxyCodeLine{00016\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ np.array([float(value)\ \textcolor{keywordflow}{for}\ value\ \textcolor{keywordflow}{in}\ str\_list])}
\DoxyCodeLine{00017\ \ \ \ \ \textcolor{keywordflow}{except}\ ValueError:}
\DoxyCodeLine{00018\ \ \ \ \ \ \ \ \ print(f\textcolor{stringliteral}{"{}Skipping\ invalid\ input:\ \{input\_str\}"{}})}
\DoxyCodeLine{00019\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ np.array([])}
\DoxyCodeLine{00020\ }

\end{DoxyCode}
